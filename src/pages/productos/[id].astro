---
import ProductViewer from '@/components/ProductViewer.astro'
import Layout from '@/layouts/Layout.astro'
import { cn } from '@/lib/utils'
import products from '@/muckup/products.json'

export function getStaticPaths() {
  return products.map((product) => {
    return {
      params: { id: product.id },
      props: { product },
    }
  })
}

// const { id } = Astro.params
const { product } = Astro.props
const { title, images, id } = product
---

<Layout title="product">
  <main class="container px-4 mx-auto">
    <section class="grid grid-cols-2">
      <ProductViewer id={id} images={images} title={title} />
      <article>
        <p transition:name={`product-title-${id}`}>
          {product.title}
        </p>
      </article>
    </section>
  </main>
</Layout>
